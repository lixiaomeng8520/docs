Nginx
=====

* `官方文档​ <http://nginx.org/en/docs/>`_
* `​简明 Nginx Location Url 配置笔记​ <https://www.jianshu.com/p/e154c2ef002f>`_
* `FASTCGI_PARAMS VERSUS FASTCGI.CONF – NGINX CONFIG HISTORY​ <https://blog.martinfjordvald.com/2013/04/nginx-config-history-fastcgi_params-versus-fastcgi-conf/>`_
* `header的安全配置指南​ <https://www.cnblogs.com/doseoer/p/5676297.html>`_
* `Pitfalls and Common Mistakes <https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/#>`_
  
变量
----

+----------------------------+----------------------------------------------------------------+
| 变量名                     | 变量值                                                         |
+============================+================================================================+
|  uri                       | 域名后 / 到第一个 ? 之前                                       |
+----------------------------+----------------------------------------------------------------+
|  fastcgi_script_name       | 目前看同 uri                                                   |
+----------------------------+----------------------------------------------------------------+
|  request_uri               | 域名后 / 到最后                                                |
+----------------------------+----------------------------------------------------------------+
|  is_args                   | 第一个 ?                                                       |
+----------------------------+----------------------------------------------------------------+
|  args                      | 第一个 ? 之后的内容                                            |
+----------------------------+----------------------------------------------------------------+

location规则
------------

语法

.. code-block:: bash
    
    location [ = | ~ | ~* | ^~ ] uri { ... }
    location @name { ... }

匹配模式

+------+----------+----------------------+-------------+-----------------------------------------------------+
|优先级|   名字   |    语法              | 区分大小写  |   可以使用正则                                      |
+======+==========+======================+=============+=====================================================+
|  1   | 精确匹配 | location = /demo {}  |   是        |      否                                             |
+------+----------+----------------------+-------------+-----------------------------------------------------+
|  2   | 前缀匹配 | location ^~ /demo {} |   是        |      否                                             |
+------+----------+----------------------+-------------+-----------------------------------------------------+
|  3   | 正则匹配 | location ~ /demo {}  |   是        |      是                                             |
+------+----------+----------------------+-------------+-----------------------------------------------------+
|  3   | 正则匹配 | location ~* /demo {} |   否        |      是                                             |
+------+----------+----------------------+-------------+-----------------------------------------------------+
|  4   | 正常匹配 | location /demo {}    |   否        |      是                                             |
+------+----------+----------------------+-------------+-----------------------------------------------------+
|  5   |  全匹配  | location / {}        |   是        |      否                                             |
+------+----------+----------------------+-------------+-----------------------------------------------------+